spring.application.name=Caba

# ========================================
# CONFIGURACIÓN DE BASE DE DATOS
# ========================================

# H2 Database (Para desarrollo)
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# MySQL Database (Para producción - comentado por defecto)
# spring.datasource.url=jdbc:mysql://localhost:3306/caba_pro?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
# spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
# spring.datasource.username=root
# spring.datasource.password=your_password

# ========================================
# CONFIGURACIÓN JPA/HIBERNATE
# ========================================

# Configuración para H2
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Configuración para MySQL (comentado por defecto)
# spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# Configuración general de Hibernate
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# ========================================
# CONFIGURACIÓN H2 CONSOLE
# ========================================

spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false
spring.h2.console.settings.trace=false

# ========================================
# CONFIGURACIÓN DE SERVIDOR
# ========================================

server.port=8081
server.servlet.context-path=/

# ========================================
# CONFIGURACIÓN DE INTERNACIONALIZACIÓN
# ========================================

# Ubicación de los archivos de mensajes
spring.messages.basename=classpath:messages

# Codificación de los archivos de propiedades
spring.messages.encoding=UTF-8

# Caché de mensajes (segundos). -1 para desactivar en desarrollo
spring.messages.cache-duration=-1

# Si no encuentra una clave, usar el código como mensaje por defecto
spring.messages.use-code-as-default-message=true

# Fallback al idioma por defecto si no se encuentra traducción
spring.messages.fallback-to-system-locale=false

# ========================================
# CONFIGURACIÓN DE SESIONES
# ========================================

# Tiempo de vida de la sesión (30 minutos)
server.servlet.session.timeout=30m

# Configuración de cookies de sesión
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax

# Nombre de la cookie de sesión
server.servlet.session.cookie.name=CABA_SESSION

# Tracking mode - permite múltiples pestañas
server.servlet.session.tracking-modes=cookie

# ========================================
# CONFIGURACIÓN DE LOGGING
# ========================================

logging.level.org.springframework.web=DEBUG
logging.level.com.pagina.Caba=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ========================================
# CONFIGURACIÓN DE JACKSON
# ========================================

spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=America/Bogota

# ========================================
# CONFIGURACIÓN DE VALIDACIÓN
# ========================================

spring.jpa.properties.hibernate.validator.apply_to_ddl=false

# ========================================
# CONFIGURACIÓN DE API EXTERNA - OPENWEATHERMAP
# ========================================

# API Key de OpenWeatherMap (obtener en: https://openweathermap.org/api)
# IMPORTANTE: Reemplazar 'demo' con tu API key real
openweather.api.key=demo
openweather.api.url=https://api.openweathermap.org/data/2.5

# Configuración de caché (5 minutos = 300 segundos)
spring.cache.cache-names=weatherCache
spring.cache.caffeine.spec=maximumSize=100,expireAfterWrite=300s
