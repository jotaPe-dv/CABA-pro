<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Nuevo Partido</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h2>Nuevo Partido</h2>
    <form th:action="@{/partidos/guardar}" th:object="${partido}" method="post" novalidate>
        <div th:if="${#fields.hasErrors()}" class="alert alert-danger">
            <ul>
                <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
            </ul>
        </div>
        <div class="mb-3">
            <label class="form-label">Equipo Local</label>
            <input type="text" class="form-control" th:field="*{equipoLocal}" required />
        </div>
        <div class="mb-3">
            <label class="form-label">Equipo Visitante</label>
            <input type="text" class="form-control" th:field="*{equipoVisitante}" required />
        </div>
        <div class="mb-3">
            <label class="form-label">Fecha y Hora</label>
            <input type="datetime-local" class="form-control" th:field="*{fechaPartido}" required />
        </div>
        <div class="mb-3">
            <label class="form-label">Ubicaci√≥n</label>
            <input type="text" class="form-control" th:field="*{ubicacion}" required />
        </div>
        <div class="mb-3">
            <label class="form-label">Tipo de Partido</label>
            <select class="form-select" th:field="*{tipoPartido}" id="tipoPartidoSelect" required>
                <option value="Oficial">Oficial</option>
                <option value="Amistoso">Amistoso</option>
            </select>
        </div>
        <div class="mb-3" id="torneoSelectDiv">
            <label class="form-label">Torneo</label>
            <select class="form-select" name="torneoId" id="torneoIdSelect">
                <option th:each="torneo : ${torneos}" th:value="${torneo.id}" th:text="${torneo.nombre}" th:selected="${partido.torneo != null} ? ${torneo.id} == ${partido.torneo.id} : false"></option>
            </select>
        </div>
        <input type="hidden" id="torneoAmistosoId" name="torneoAmistosoId" th:value="${torneoAmistosoId}" />
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tipoSelect = document.getElementById('tipoPartidoSelect');
            const torneoDiv = document.getElementById('torneoSelectDiv');
            function toggleTorneo() {
                if (tipoSelect.value === 'Amistoso') {
                    torneoDiv.style.display = 'none';
                } else {
                    torneoDiv.style.display = 'block';
                }
            }
            tipoSelect.addEventListener('change', toggleTorneo);
            toggleTorneo();
        });
        </script>
        <button type="submit" class="btn btn-success">Guardar</button>
        <a th:href="@{/partidos}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
</body>
</html>
